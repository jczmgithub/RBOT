function openLegend(e,t){var a,n,o;for(n=document.getElementsByClassName("tabcontent"),a=0;a<n.length;a++)n[a].style.display="none";for(o=document.getElementsByClassName("tablinks"),a=0;a<o.length;a++)o[a].className=o[a].className.replace(" active","");document.getElementById(t).style.display="block",e.currentTarget.className+=" active"}function addFila(){$.ajax({url:"/user/tablaDatos",type:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done(function(e){$("#tablaBody").append(e)})}function addFilaS3(e,t,a,n){$.ajax({url:"/user/tablaDatos",type:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done(function(o){$filaContenido=$(o),$($filaContenido).find('select[name="selecRobot"]').val(e),$($filaContenido).find('select[name="selecMotor"]').val(t),$($filaContenido).find('input[name="pasosForm"]').val(a),$($filaContenido).find('input[name="velocidadForm"]').val(n),$("#tablaBody").append($filaContenido)})}function delFila(e){var t=e.parentNode.parentNode;t.parentNode.removeChild(t)}function delFilas(){$.ajax({url:"/user/tablaDatos",type:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done(function(){$("#tablaBody tr").remove()})}function playVid(){$("#videoSrc").attr("src","/video/secuencia_completa.mp4"),document.getElementById("video").load(),setTimeout(function(){document.getElementById("video").play()},4e3)}function playVidPos(e){$("#videoSrc").attr("src","/video/"+e+".mp4"),document.getElementById("video").load(),setTimeout(function(){document.getElementById("video").play()},2e3)}function playVidOrigen(){$("#videoSrc").attr("src").replace(".","inverso."),document.getElementById("video").load(),setTimeout(function(){document.getElementById("video").play()},2e3),console.log($("#videoSrc").attr("src")),console.log(video)}function send(e){var t=$(e).parent().parent(),a={robot:$(t).find('select[name="selecRobot"]').val(),motor:$(t).find('select[name="selecMotor"]').val(),pasos:$(t).find('input[name="pasosForm"]').val(),velocidad:$(t).find('input[name="velocidadForm"]').val()};$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/domotekSend",type:"POST",dataType:"text",success:function(e){alert(e),playVidPos($(t).find('select[name="selecMotor"]').val())},error:function(e){alert("Fallo al enviar..."+e)},complete:function(e){},data:a})}function paradoEmergencia(){var e={mensaje:"Stop"};$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/domotekStop",type:"POST",dataType:"text",success:function(e){alert(e)},error:function(e,t,a){},complete:function(e){},data:e})}function vueltaOrigen(){var e={mensaje:"origen"};$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/domotekHome",type:"POST",dataType:"text",success:function(e){alert(e),playVidOrigen()},error:function(e,t,a){},complete:function(e){},data:e})}function enviarFila(e){var t={robot:$(e).find('select[name="selecRobot"]').val(),motor:$(e).find('select[name="selecMotor"]').val(),pasos:$(e).find('input[name="pasosForm"]').val(),velocidad:$(e).find('input[name="velocidadForm"]').val()};$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/domotekSend",type:"POST",dataType:"text",success:function(e){alert(e)},error:function(e){alert("Fallo al enviar..."+e)},complete:function(e){},data:t}),playVid()}function enviarFilas(){for(var e=$("tr"),t=1;t<e.length;t++)enviarFila(e[t]);playVid()}function guardarFila(e,t){var a={filas:e,fichero:t};$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/guardarFila",type:"POST",dataType:"text",success:function(e){},error:function(e,t,a){},complete:function(e){},data:a})}function guardarFilas(){for(var e=prompt("Introduce nombre de la secuencia"),t=$("tr"),a="",n=1;n<t.length;n++)a=a+";"+$(t[n]).find('select[name="selecRobot"]').val()+","+$(t[n]).find('select[name="selecMotor"]').val()+","+$(t[n]).find('input[name="pasosForm"]').val()+","+$(t[n]).find('input[name="velocidadForm"]').val(),$(t[n]).find('select[name="selecRobot"]').val();guardarFila(a,e)}function eliminarUser(e){if(confirm("Estas segur@???")){var t={email:e};$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/user/eliminarUser",type:"post",dataType:"text",success:function(){cargarTablaUser()},error:function(){alert("ERROR!!!")},data:t})}}function cargarTablaUser(){$.ajax({url:"/user/verUser/tablaUser",type:"get",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done(function(e){$("#usuarios").html(e)})}function cargarSecuncia(){$("#myModal").modal(),$("#selecSecuencia").empty(),$.ajax({url:"/listadoS3",type:"get",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done(function(e){$("<option/>",{text:"--Selecciona la secuencia--",disabled:"disabled",selected:"selected"}).appendTo("#selecSecuencia");for(var t=0;t<e.length;t++)$("<option/>",{text:e[t],value:e[t]}).appendTo("#selecSecuencia")})}function cargarTablaRobot(){$.ajax({url:"/user/verRobot/tablaRobot",type:"get",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done(function(e){$("#robots").html(e)})}function eliminarRobot(e){if(confirm("Estas segur@???")){var t={id:e};$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/user/eliminarRobot",type:"post",dataType:"text",success:function(){cargarTablaRobot()},error:function(){alert("ERROR!!!")},data:t})}}$(document).ready(function(){try{$("#addFilas").click(function(e){e.preventDefault(),addFila()}),$("#delFilas").click(function(e){e.preventDefault(),delFilas()}),$("#sendFilas").click(function(e){e.preventDefault(),enviarFilas()}),$("#saveSecuencia").click(function(e){e.preventDefault(),guardarFilas()}),$("#loadSecuencia").click(function(e){e.preventDefault(),cargarSecuncia()}),$("#stopRobot").click(function(e){e.preventDefault(),paradoEmergencia()}),$("#homeRobot").click(function(e){e.preventDefault(),vueltaOrigen()}),$("#selecSecuencia").on("change",function(e){var t=$("option:selected",this),a=t.val();console.log(t),console.log(a);var n={fichero:a};$.ajax({url:"/mostrarValores",type:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:n}).done(function(e){$("#tablaBody").empty();for(var t,a=e.split(";"),n=1;n<a.length;n++){console.log(a[n]),t=a[n].split(",");for(var o=new Array,r=0;r<t.length;r++)o.push(t[r]);addFilaS3(o[0],o[1],o[2],o[3])}})}),$("#tablaBody").on("click",".enviar",function(e){e.preventDefault()}),openLegend(null,"divRobot")}catch(e){}});